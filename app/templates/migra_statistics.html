{% extends "base.html" %}

{% block title %}Migration Agent Dashboard{% endblock %}

{% block css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles3.css') }}">
{% endblock %}

{% block content %}
  <h1>Migration Agent Dashboard</h1>

  <!-- Pie Charts for Various Applicant Qualifications -->
  <div class="chart-container">
    <h3>Applicants Completed Specialist Education Qualification</h3>
    <canvas id="specialistEducationChart"></canvas>
  </div>
  
  <div class="chart-container">
    <h3>Applicants Met Australian Study Requirement</h3>
    <canvas id="australianStudyRequirementChart"></canvas>
  </div>

  <div class="chart-container">
    <h3>Applicants Completed Professional Year in Australia</h3>
    <canvas id="professionalYearChart"></canvas>
  </div>

  <div class="chart-container">
    <h3>Applicants Who Can Speak Community Language</h3>
    <canvas id="communityLanguageChart"></canvas>
  </div>

  <div class="chart-container">
    <h3>Applicants Completed Regional Study</h3>
    <canvas id="regionalStudyChart"></canvas>
  </div>

  <!-- Bar Charts for Age, English Language Level, Skilled Employment, and Education Level -->
  <div class="chart-container">
    <h3>Applicants by Age Group</h3>
    <canvas id="ageGroupChart"></canvas>
  </div>

  <div class="chart-container">
    <h3>Applicants by English Language Level</h3>
    <canvas id="englishLevelChart"></canvas>
  </div>

  <div class="chart-container">
    <h3>Overseas Skilled Employment</h3>
    <canvas id="overseasEmploymentChart"></canvas>
  </div>

  <div class="chart-container">
    <h3>Australian Skilled Employment</h3>
    <canvas id="australianEmploymentChart"></canvas>
  </div>

  <div class="chart-container">
    <h3>Highest Level of Education</h3>
    <canvas id="educationLevelChart"></canvas>
  </div>

  <!-- Pass processed chart data from Flask to JS via the window object -->
  <script>
    // Pie Chart Data
    window.specialistEducationLabels = {{ specialist_education_labels|tojson }};
    window.specialistEducationValues = {{ specialist_education_values|tojson }};

    window.australianStudyRequirementLabels = {{ australian_study_labels|tojson }};
    window.australianStudyRequirementValues = {{ australian_study_values|tojson }};

    window.professionalYearLabels = {{ professional_year_labels|tojson }};
    window.professionalYearValues = {{ professional_year_values|tojson }};

    window.communityLanguageLabels = {{ community_language_labels|tojson }};
    window.communityLanguageValues = {{ community_language_values|tojson }};

    window.regionalStudyLabels = {{ regional_study_labels|tojson }};
    window.regionalStudyValues = {{ regional_study_values|tojson }};

    // Bar Chart Data
    window.ageGroupLabels = {{ age_group_labels|tojson }};
    window.ageGroupValues = {{ age_group_values|tojson }};

    window.englishLevelLabels = {{ english_level_labels|tojson }};
    window.englishLevelValues = {{ english_level_values|tojson }};

    window.overseasEmploymentLabels = {{ overseas_employment_labels|tojson }};
    window.overseasEmploymentValues = {{ overseas_employment_values|tojson }};

    window.australianEmploymentLabels = {{ australian_employment_labels|tojson }};
    window.australianEmploymentValues = {{ australian_employment_values|tojson }};

    window.educationLevelLabels = {{ education_level_labels|tojson }};
    window.educationLevelValues = {{ education_level_values|tojson }};
  </script>

  <!-- Link to external JavaScript files -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{{ url_for('static', filename='js/charts.js') }}"></script>
{% endblock %}
